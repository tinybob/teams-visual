<nb-card *ngIf="collection; else loading" [class.own-scroll]="collection.selfScroll">
    <nb-list 
        nbInfiniteList 
        [listenWindowScroll]="!collection.selfScroll"
        [threshold]="300" 
        (bottomThreshold)="loadNext(collection)">
        <nb-list-item class="list-item" *ngFor="let c of collection?.value">
            <infinite-list-item style="display: flex; justify-content: space-between; width: 100%;" [data]="c"></infinite-list-item>
        </nb-list-item>
        <nb-list-item class="list-item" *ngFor="let _ of collection?.placeholders">
            <infinite-list-item-placeholder style="width: 100%;"></infinite-list-item-placeholder>
        </nb-list-item>
    </nb-list>
</nb-card>

<ng-template #loading>
    <div style="background: purple;">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto; height: 4.1rem" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
            <g transform="translate(26.666666666666668,26.666666666666668)">
              <rect x="-20" y="-20" width="40" height="40" fill="#f05125">
                <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.1500000000000001;1" begin="-0.3s"></animateTransform>
              </rect>
            </g>
            <g transform="translate(73.33333333333333,26.666666666666668)">
              <rect x="-20" y="-20" width="40" height="40" fill="#fdb813">
                <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.1500000000000001;1" begin="-0.2s"></animateTransform>
              </rect>
            </g>
            <g transform="translate(26.666666666666668,73.33333333333333)">
              <rect x="-20" y="-20" width="40" height="40" fill="#7fbb42">
                <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.1500000000000001;1" begin="0s"></animateTransform>
              </rect>
            </g>
            <g transform="translate(73.33333333333333,73.33333333333333)">
              <rect x="-20" y="-20" width="40" height="40" fill="#32a0da">
                <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.1500000000000001;1" begin="-0.1s"></animateTransform>
              </rect>
            </g>
            <!-- [ldio] generated by https://loading.io/ --></svg>
            
    </div>
</ng-template>